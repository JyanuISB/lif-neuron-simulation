<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIF NEURON INTERACTIVE SIMULATION</title>

  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #000000;
      --panel: #050505;
      --border: #1f2933;
      --text-primary: #ffffff;
      --text-secondary: #9ca3af;
      --accent: #e5e7eb;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text-primary);
      font-family: 'Inter', sans-serif;
      line-height: 1.7;
    }

    header {
      padding: 6rem 1.5rem 4rem;
      text-align: center;
    }

    header h1 {
      font-family: 'League Spartan', sans-serif;
      letter-spacing: 0.14em;
      font-size: clamp(2.2rem, 4vw, 3.2rem);
      margin: 0 0 1rem 0;
      text-transform: uppercase;
    }

    header p {
      max-width: 640px;
      margin: 0.8rem auto;
      font-size: 1rem;
      color: var(--text-secondary);
    }

    header a {
      color: var(--text-primary);
      text-decoration: none;
      border-bottom: 1px solid var(--border);
      padding-bottom: 0.15rem;
    }

    section {
      max-width: 1100px;
      margin: auto;
      padding: 4rem 1.5rem;
    }

    .text-block {
      max-width: 720px;
      margin: auto;
      font-size: 1.15rem;
      color: #d1d5db;
      text-align: justify;
    }

    .sim-container {
      margin-top: 5rem;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 3rem;
    }

    h2 {
      font-family: 'League Spartan', sans-serif;
      letter-spacing: 0.12em;
      font-size: 1.1rem;
      text-transform: uppercase;
      margin-bottom: 2.5rem;
      color: var(--text-primary);
    }

    .controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 2.5rem;
      margin-bottom: 3rem;
    }

    .control-card {
      padding: 1.6rem 1.4rem;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: linear-gradient(180deg, #060606, #000000);
      transition: transform 0.3s ease, border-color 0.3s ease;
    }

    .control-card:hover {
      transform: translateY(-4px);
      border-color: #374151;
    }

    .control-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      font-size: 0.75rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-secondary);
    }

    .control-value {
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      color: var(--text-primary);
      padding: 0.25rem 0.55rem;
      border-radius: 6px;
      background: #020617;
      border: 1px solid var(--border);
    }

    input[type="range"] {
      width: 100%;
      margin-top: 0.6rem;
      accent-color: var(--accent);
      cursor: pointer;
    }

    footer {
      padding: 4rem 1.5rem 3rem;
      text-align: center;
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    .socials {
      margin-top: 1.5rem;
      display: flex;
      justify-content: center;
      gap: 1.4rem;
    }

    .socials a {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease, border-color 0.3s ease, background 0.3s ease;
      background: #020617;
    }

    .socials a:hover {
      transform: translateY(-4px) scale(1.05);
      border-color: #6b7280;
      background: #050505;
    }

    .socials svg {
      width: 18px;
      height: 18px;
      fill: #e5e7eb;
      transition: transform 0.3s ease;
    }

    .socials a:hover svg {
      transform: rotate(-6deg);
    }
  </style>
</head>
<body>

<header>
  <h1>LEAKY INTEGRATE AND FIRE NEURON</h1>
  <p>
    An interactive visualization of a stochastic leaky integrate and fire neuron model.
  </p>
  <p>
    <a href="https://indagada.medium.com/leaky-integrate-and-fire-model-43f44a19ed41" target="_blank" rel="noopener noreferrer">
      Read more on my Medium Blog space. 
    </a>
  </p>
</header>

<section>
  <div class="text-block">
    <p>
      Neurons continuously integrate incoming signals while simultaneously losing charge through
      leaky ion channels. This leak is fundamental. It introduces decay, limits memory, and enforces
      timing constraints on neural computation.
    </p>
    <p>
      Only sufficiently strong and sustained input can overcome this decay and push the membrane
      potential toward a firing threshold. When that threshold is crossed, the neuron emits a spike
      and resets, briefly becoming unresponsive before integration resumes.
    </p>
    <p>
      In computational terms, leakage stabilizes dynamics. It filters noise, prevents runaway
      excitation, and keeps neurons responsive rather than brittle. What looks like loss is
      actually control.
    </p>
  </div>

  <div class="sim-container">
    <h2>Interactive Simulation</h2>

    <div class="controls">
      <div class="control-card">
        <div class="control-header">
          <span>Input current I (nA)</span>
          <span class="control-value" id="iVal"></span>
        </div>
        <input type="range" min="0" max="6" step="0.1" value="3.4" id="inputCurrent" />
      </div>

      <div class="control-card">
        <div class="control-header">
          <span>Noise sigma (mV)</span>
          <span class="control-value" id="sigmaVal"></span>
        </div>
        <input type="range" min="0" max="2" step="0.1" value="0.5" id="sigma" />
      </div>
    </div>

    <div id="plot"></div>
  </div>
</section>

<footer>
  Jyanu | LIF Neuron Simulation

  <div class="socials">
    <a href="https://www.linkedin.com/in/s-jyanu-r-87313a2b3/" target="_blank" aria-label="LinkedIn">
      <svg viewBox="0 0 24 24"><path d="M4.98 3.5C4.98 4.88 3.87 6 2.5 6S0 4.88 0 3.5 1.11 1 2.48 1s2.5 1.12 2.5 2.5zM0 8h5v16H0zM7.5 8h4.8v2.2h.1c.67-1.2 2.3-2.4 4.7-2.4 5 0 5.9 3.2 5.9 7.4V24h-5V16.1c0-1.9 0-4.4-2.7-4.4-2.7 0-3.1 2.1-3.1 4.3V24h-5z"/></svg>
    </a>

    <a href="https://github.com/JyanuISB" target="_blank" aria-label="GitHub">
      <svg viewBox="0 0 24 24"><path d="M12 .5C5.7.5.5 5.8.5 12.3c0 5.2 3.4 9.6 8.2 11.2.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.4-4-1.4-.5-1.3-1.2-1.6-1.2-1.6-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 .1.8 1.6 2.8 2.3.3-.8.6-1.4 1-1.7-2.7-.3-5.5-1.3-5.5-6 0-1.3.5-2.4 1.2-3.2-.1-.3-.5-1.5.1-3.1 0 0 1-.3 3.3 1.2.9-.2 1.9-.4 2.9-.4s2 .1 2.9.4c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8.1 3.1.8.8 1.2 1.9 1.2 3.2 0 4.7-2.8 5.7-5.5 6 .4.4 1.1 1.1 1.1 2.3v3.4c0 .3.2.7.8.6 4.8-1.6 8.2-6 8.2-11.2C23.5 5.8 18.3.5 12 .5z"/></svg>
    </a>

    <a href="https://x.com/indagadais" target="_blank" aria-label="X">
      <svg viewBox="0 0 24 24"><path d="M18.2 2H21l-6.3 7.2L22 22h-6.9l-5.4-7-6.1 7H1l6.7-7.7L2 2h7l4.9 6.3L18.2 2z"/></svg>
    </a>
  </div>
</footer>

<script>
  const V_rest = -70e-3;
  const V_reset = -80e-3;
  const V_th = -55e-3;
  const R = 10e6;
  const tau_m = 20e-3;
  const ref_t = 2e-3;
  const dt = 1e-5;
  const t_max = 0.2;

  function simulate() {
    const I = parseFloat(inputCurrent.value) * 1e-9;
    const sigma = parseFloat(sigmaInput.value) * 1e-3;

    let V = V_rest;
    let last_spike_t = -Infinity;

    const time = [];
    const voltage = [];
    const spikes_t = [];
    const spikes_v = [];

    for (let t = 0; t < t_max; t += dt) {
      if (t - last_spike_t < ref_t) {
        V = V_reset;
      } else {
        const dv = (dt / tau_m) * (-(V - V_rest) + R * I);
        const noise = sigma * randn();
        V += dv + noise;
        if (V >= V_th) {
          spikes_t.push(t * 1000);
          spikes_v.push(V_th * 1000);
          V = V_reset;
          last_spike_t = t;
        }
      }
      time.push(t * 1000);
      voltage.push(V * 1000);
    }

    Plotly.newPlot('plot', [
      { x: time, y: voltage, mode: 'lines', name: 'V(t)' },
      { x: spikes_t, y: spikes_v, mode: 'markers', name: 'Spikes', marker: { size: 5 } },
      { x: time, y: Array(time.length).fill(V_th * 1000), mode: 'lines', name: 'Threshold', line: { dash: 'dash' } }
    ], {
      paper_bgcolor: '#000000',
      plot_bgcolor: '#000000',
      font: { color: '#ffffff', family: 'Inter, sans-serif' },
      xaxis: { title: 'Time (ms)', gridcolor: '#111827' },
      yaxis: { title: 'Membrane potential (mV)', gridcolor: '#111827' }
    });
  }

  function randn() {
    let u = 0, v = 0;
    while (u === 0) u = Math.random();
    while (v === 0) v = Math.random();
    return Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
  }

  const inputCurrent = document.getElementById('inputCurrent');
  const sigmaInput = document.getElementById('sigma');
  const iVal = document.getElementById('iVal');
  const sigmaVal = document.getElementById('sigmaVal');

  function updateLabels() {
    iVal.textContent = inputCurrent.value;
    sigmaVal.textContent = sigmaInput.value;
  }

  [inputCurrent, sigmaInput].forEach(el => {
    el.addEventListener('input', () => {
      updateLabels();
      simulate();
    });
  });

  updateLabels();
  simulate();
</script>

</body>
</html>

